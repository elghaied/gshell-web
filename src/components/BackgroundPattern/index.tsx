'use client'

import React, { JSX, useEffect, useState } from 'react'

const Svg1 = () => (
<svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 44 133" fill="none" className='~w-5/11 h-16/32'>
  <rect x="38.3633" y="70.4546" width="5.63636" height="5.63636" rx="2" fill="#D80D0D"/>
  <rect x="38.3633" y="98.6365" width="5.63636" height="5.63636" rx="2" fill="#D80D0D"/>
  <rect x="38.3633" y="84.5454" width="5.63636" height="5.63636" rx="2" fill="#D80D0D"/>
  <rect x="38.3633" y="112.727" width="5.63636" height="5.63636" rx="2" fill="#D80D0D"/>
  <rect x="38.3633" y="126.818" width="5.63636" height="5.63636" rx="2" fill="#D80D0D"/>
  <rect width="5.63636" height="5.63636" rx="2" transform="matrix(1 0 0 -1 -3.90918 62)" fill="#D80D0D"/>
  <rect width="5.63636" height="5.63636" rx="2" transform="matrix(1 0 0 -1 -3.90918 33.8181)" fill="#D80D0D"/>
  <rect width="5.63636" height="5.63636" rx="2" transform="matrix(1 0 0 -1 -3.90918 47.9092)" fill="#D80D0D"/>
  <rect width="5.63636" height="5.63636" rx="2" transform="matrix(1 0 0 -1 -3.90918 19.7273)" fill="#D80D0D"/>
  <rect width="5.63636" height="5.63636" rx="2" transform="matrix(1 0 0 -1 -3.90918 5.63647)" fill="#D80D0D"/>
  <rect x="24.2725" y="70.4546" width="5.63636" height="5.63636" rx="2" fill="#D80D0D"/>
  <rect x="24.2725" y="98.6365" width="5.63636" height="5.63636" rx="2" fill="#D80D0D"/>
  <rect x="24.2725" y="84.5454" width="5.63636" height="5.63636" rx="2" fill="#D80D0D"/>
  <rect x="24.2725" y="112.727" width="5.63636" height="5.63636" rx="2" fill="#D80D0D"/>
  <rect x="24.2725" y="126.818" width="5.63636" height="5.63636" rx="2" fill="#D80D0D"/>
  <rect x="10.1816" width="5.63636" height="5.63636" rx="2"  className='fill-black dark:fill-white'/>
  <rect x="10.1816" y="28.1819" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'  />
  <rect x="10.1816" y="14.0911" width="5.63636" height="5.63636" rx="2"  className='fill-black dark:fill-white'/>
  <rect x="10.1816" y="42.2727" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
  <rect x="10.1816" y="56.3638" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
  <rect x="38.3633" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
  <rect x="38.3633" y="28.1819" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
  <rect x="38.3633" y="14.0911" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
  <rect x="38.3633" y="42.2727" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
  <rect x="38.3633" y="56.3638" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
  <rect width="5.63636" height="5.63636" rx="2" transform="matrix(1 0 0 -1 -3.90918 132.455)" className='fill-black dark:fill-white'/>
  <rect width="5.63636" height="5.63636" rx="2" transform="matrix(1 0 0 -1 -3.90918 104.273)" className='fill-black dark:fill-white'/>
  <rect width="5.63636" height="5.63636" rx="2" transform="matrix(1 0 0 -1 -3.90918 118.364)" className='fill-black dark:fill-white'/>
  <rect width="5.63636" height="5.63636" rx="2" transform="matrix(1 0 0 -1 -3.90918 90.1819)" className='fill-black dark:fill-white'/>
  <rect width="5.63636" height="5.63636" rx="2" transform="matrix(1 0 0 -1 -3.90918 76.0911)" className='fill-black dark:fill-white'/>
  <rect x="24.2725" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
  <rect x="24.2725" y="28.1819" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
  <rect x="24.2725" y="14.0911" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
  <rect x="24.2725" y="42.2727" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
  <rect x="24.2725" y="56.3638" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
  <rect x="10.1816" y="70.4546" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
  <rect x="10.1816" y="98.6365" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
  <rect x="10.1816" y="84.5454" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
  <rect x="10.1816" y="112.727" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
  <rect x="10.1816" y="126.818" width="5.63636" height="5.63636" rx="2" className='fill-black dark:fill-white'/>
</svg>
)

const Svg2 = () => (
<svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 68 191" fill="none" className=' ~w-8/16 ~h-24/48'>
  <circle cx="3" cy="3" r="3" transform="matrix(-1 0 0 1 42 0)" fill="#C5C5C5"/>
  <circle cx="7" cy="7" r="7" transform="matrix(-1 0 0 1 68 100)" fill="#D80D0D"/>
  <circle cx="3" cy="3" r="3" transform="matrix(-1 0 0 1 6 185)" className='fill-black dark:fill-white'/>
</svg>
)

export default function SvgPattern() {
  const [patterns, setPatterns] = useState<JSX.Element[]>([])

  useEffect(() => {
    // Generate patterns only once when component mounts
    const generatePatterns = () => {
      const newPatterns: JSX.Element[] = []
      let currentHeight = 0
      let isLeft = true

      const contentHeight = document.getElementById('content-wrapper')?.clientHeight || 0

      while (currentHeight < contentHeight) {
        const spacing = Math.floor(Math.random() * (500 - 50 + 1) + 50)
        const isSvg1 = Math.random() < 0.5

        newPatterns.push(
          <div
            key={currentHeight}
            className={`absolute ${isLeft ? 'left-0' : 'right-0'}`}
            style={{ top: `${currentHeight}px` }}
          >
            <div className={`${!isLeft && 'scale-x-[-1]'}`}>
              {isSvg1 ? <Svg1 /> : <Svg2 />}
            </div>
          </div>
        )

        currentHeight += spacing + (isSvg1 ? 133 : 191)
        isLeft = !isLeft
      }

      setPatterns(newPatterns)
    }

    // Generate patterns once on mount
    generatePatterns()

    // Only regenerate on actual window resize, not on mobile UI changes
    let timeoutId: NodeJS.Timeout
    const handleResize = () => {
      clearTimeout(timeoutId)
      timeoutId = setTimeout(() => {
        const newContentHeight = document.getElementById('content-wrapper')?.clientHeight || 0
        if (Math.abs(newContentHeight - (document.getElementById('content-wrapper')?.clientHeight || 0)) > 100) {
          generatePatterns()
        }
      }, 100)
    }

    window.addEventListener('resize', handleResize)

    return () => {
      window.removeEventListener('resize', handleResize)
      clearTimeout(timeoutId)
    }
  }, [])

  return (
    <div className="absolute inset-x-0 top-0 pointer-events-none -z-10">
      {patterns}
    </div>
  )
}
